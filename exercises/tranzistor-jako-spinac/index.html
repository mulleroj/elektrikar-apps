<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tranzistor jako sp√≠naƒç - Simul√°tor</title>
    <style>
        :root {
            --blue-600: #2563eb;
            --blue-700: #1d4ed8;
            --blue-800: #1e40af;
            --blue-900: #1e3a8a;
            --slate-50: #f8fafc;
            --slate-100: #f1f5f9;
            --slate-200: #e2e8f0;
            --slate-400: #94a3b8;
            --slate-500: #64748b;
            --slate-600: #475569;
            --slate-700: #334155;
            --slate-800: #1e293b;
            --slate-900: #0f172a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--slate-50);
            color: var(--slate-900);
            padding: 16px;
            line-height: 1.5;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Header */
        header {
            background: var(--blue-800);
            color: white;
            padding: 20px 24px;
            border-radius: 16px;
            border-bottom: 4px solid var(--blue-900);
            margin-bottom: 24px;
            box-shadow: 0 10px 25px -5px rgba(30, 64, 175, 0.3);
        }

        header h1 {
            font-size: 1.5rem;
            font-weight: 800;
            letter-spacing: -0.02em;
        }

        header .subtitle {
            color: #93c5fd;
            font-size: 0.75rem;
            margin-top: 2px;
        }

        header .flex {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        header .icon {
            font-size: 1.8rem;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--slate-200);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.06);
            margin-bottom: 24px;
        }

        .card h2 {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--slate-700);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card h2 .icon {
            color: var(--blue-600);
        }

        /* Grid */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }

        /* Circuit diagram */
        .circuit-box {
            background: var(--slate-50);
            border: 2px dashed var(--slate-200);
            border-radius: 12px;
            height: 260px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .led-glow {
            position: absolute;
            top: 48px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #facc15;
            filter: blur(40px);
            pointer-events: none;
            transition: opacity 0.3s;
        }

        /* Slider */
        .slider-group {
            background: var(--slate-50);
            padding: 16px;
            border-radius: 12px;
            border: 1px solid var(--slate-100);
            margin-bottom: 12px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .slider-label span {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--slate-600);
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .slider-value {
            background: var(--blue-600);
            color: white;
            padding: 4px 12px;
            border-radius: 8px;
            font-family: monospace;
            font-weight: 700;
            font-size: 0.85rem;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: var(--slate-200);
            border-radius: 4px;
            cursor: pointer;
            accent-color: var(--blue-600);
        }

        /* Status badge */
        .status-badge {
            padding: 12px;
            border-radius: 12px;
            text-align: center;
            font-weight: 700;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            border: 2px solid;
            transition: all 0.3s;
        }

        .status-off {
            background: #f3f4f6;
            color: #374151;
            border-color: #9ca3af;
        }

        .status-linear {
            background: #fef9c3;
            color: #854d0e;
            border-color: #facc15;
        }

        .status-saturated {
            background: #dcfce7;
            color: #166534;
            border-color: #4ade80;
        }

        /* Values grid */
        .values-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .val-card {
            padding: 14px;
            border-radius: 12px;
            border: 1px solid var(--slate-100);
            background: var(--slate-50);
        }

        .val-card.blue {
            background: #eff6ff80;
            border-color: #bfdbfe;
        }

        .val-card .label {
            font-size: 0.65rem;
            color: var(--slate-500);
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .val-card .value {
            font-size: 1.2rem;
            font-family: monospace;
            font-weight: 800;
            color: var(--blue-700);
        }

        .val-card .formula {
            font-size: 0.6rem;
            color: #60a5fa;
            margin-top: 4px;
            font-style: italic;
            font-family: monospace;
        }

        .val-card.span-2 {
            grid-column: span 2;
        }

        /* Config inputs */
        .config-group {
            border-top: 1px solid var(--slate-100);
            padding-top: 16px;
            margin-top: 16px;
        }

        .config-group h3 {
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--slate-400);
            margin-bottom: 12px;
        }

        .config-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--slate-50);
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid var(--slate-100);
            margin-bottom: 8px;
        }

        .config-row label {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--slate-600);
        }

        .config-row .hint {
            font-size: 0.6rem;
            color: var(--slate-400);
            font-style: italic;
        }

        .config-row input[type="number"] {
            width: 80px;
            padding: 4px 8px;
            border: 1px solid var(--slate-200);
            border-radius: 6px;
            text-align: right;
            font-family: monospace;
            font-size: 0.85rem;
        }

        .config-row .unit {
            font-size: 0.75rem;
            color: var(--slate-400);
            font-weight: 700;
            margin-left: 6px;
        }

        /* Chart */
        .chart-box {
            background: var(--slate-50);
            border: 1px solid var(--slate-100);
            border-radius: 12px;
            padding: 16px;
            flex-grow: 1;
        }

        .chart-title {
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--slate-400);
            text-align: center;
            margin-bottom: 12px;
        }

        canvas#vceChart {
            width: 100%;
            height: 180px;
            cursor: crosshair;
        }

        .chart-labels {
            display: flex;
            justify-content: space-between;
            padding: 0 8px;
            margin-top: 8px;
        }

        .chart-labels span {
            font-size: 0.6rem;
            color: var(--slate-400);
            font-weight: 700;
            text-transform: uppercase;
        }

        .chart-info {
            margin-top: 12px;
            padding: 12px;
            background: #eff6ff30;
            border-radius: 8px;
            border: 1px solid #bfdbfe50;
            font-size: 0.7rem;
            color: var(--slate-600);
            line-height: 1.6;
        }

        /* Info panel */
        .grid-info {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
        }

        @media (max-width: 768px) {
            .grid-info {
                grid-template-columns: 1fr;
            }
        }

        .safety-card {
            background: #fff7ed;
            border-radius: 16px;
            padding: 24px;
            border: 1px solid #fed7aa;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.06);
        }

        .safety-card h2 {
            color: #9a3412;
            margin-bottom: 16px;
        }

        .safety-card ul {
            list-style: none;
        }

        .safety-card li {
            font-size: 0.8rem;
            color: #7c2d12;
            margin-bottom: 12px;
            display: flex;
            gap: 8px;
        }

        .safety-card li .bullet {
            color: #f97316;
        }

        .method-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 12px;
        }

        @media (max-width: 500px) {
            .method-grid {
                grid-template-columns: 1fr;
            }
        }

        .method-box {
            padding: 12px;
            border-radius: 8px;
        }

        .method-box.blue {
            background: #eff6ff80;
            border: 1px solid #bfdbfe;
        }

        .method-box.green {
            background: #f0fdf480;
            border: 1px solid #bbf7d0;
        }

        .method-box h4 {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .method-box.blue h4 {
            color: #1e40af;
        }

        .method-box.green h4 {
            color: #166534;
        }

        .method-box p {
            font-size: 0.75rem;
            font-style: italic;
        }

        /* Quiz */
        .quiz-center {
            text-align: center;
            padding: 32px 0;
        }

        .quiz-icon {
            width: 64px;
            height: 64px;
            background: #eff6ff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            font-size: 1.5rem;
        }

        .quiz-center h3 {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--slate-800);
        }

        .quiz-center p {
            font-size: 0.85rem;
            color: var(--slate-500);
            max-width: 400px;
            margin: 8px auto 0;
        }

        .btn-primary {
            background: var(--blue-600);
            color: white;
            border: none;
            padding: 12px 32px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.2s;
            box-shadow: 0 4px 14px -3px rgba(37, 99, 235, 0.4);
        }

        .btn-primary:hover {
            background: var(--blue-700);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--slate-100);
            color: var(--slate-700);
            border: none;
            padding: 10px 24px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 16px;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: var(--slate-200);
        }

        .quiz-question {
            font-size: 1.05rem;
            font-weight: 800;
            color: var(--slate-800);
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .quiz-counter {
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--slate-400);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .quiz-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 14px 16px;
            border-radius: 12px;
            border: 2px solid var(--slate-200);
            background: white;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--slate-700);
            cursor: pointer;
            margin-bottom: 10px;
            transition: all 0.2s;
        }

        .quiz-option:hover:not(:disabled) {
            border-color: #60a5fa;
            background: #eff6ff30;
        }

        .quiz-option.correct {
            background: #f0fdf4;
            border-color: #22c55e;
            color: #166534;
        }

        .quiz-option.wrong {
            background: #fef2f2;
            border-color: #ef4444;
            color: #991b1b;
        }

        .quiz-option.faded {
            background: white;
            border-color: var(--slate-100);
            color: var(--slate-400);
        }

        .quiz-explanation {
            background: var(--slate-50);
            padding: 16px;
            border-radius: 12px;
            border: 1px solid var(--slate-200);
            margin-top: 16px;
            animation: fadeIn 0.3s;
        }

        .quiz-explanation .label {
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--slate-400);
            margin-bottom: 8px;
        }

        .quiz-explanation p {
            font-size: 0.85rem;
            color: var(--slate-600);
            line-height: 1.6;
        }

        .quiz-score {
            font-size: 3rem;
            font-weight: 900;
            color: var(--blue-600);
            margin: 8px 0;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .note {
            font-size: 0.65rem;
            color: var(--slate-400);
            font-style: italic;
            margin-top: 8px;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <div class="flex">
                <span class="icon">‚ö°</span>
                <div>
                    <h1>Tranzistor jako sp√≠naƒç</h1>
                    <p class="subtitle">Interaktivn√≠ simul√°tor pro v√Ωuku</p>
                </div>
            </div>
        </header>

        <div class="grid-2">
            <!-- Left: Circuit diagram + controls -->
            <div class="card">
                <h2><span class="icon">‚èª</span> Sch√©ma zapojen√≠</h2>
                <div class="circuit-box">
                    <div class="led-glow" id="ledGlow"></div>
                    <svg viewBox="0 0 400 300" style="width:100%;height:100%;max-width:300px">
                        <!-- VCC -->
                        <line x1="200" y1="20" x2="200" y2="50" stroke="#334155" stroke-width="2" />
                        <text x="180" y="15" font-size="10" font-weight="bold" fill="#dc2626" id="vccLabel">VCC
                            (+12V)</text>
                        <!-- Load RL -->
                        <rect x="185" y="50" width="30" height="40" id="rlRect" fill="#cbd5e1" stroke="#334155"
                            stroke-width="2" />
                        <text x="225" y="75" font-size="10" fill="#64748b" id="rlLabel">RL (100Œ©)</text>
                        <!-- Transistor -->
                        <circle cx="200" cy="150" r="40" fill="none" stroke="#334155" stroke-width="2" />
                        <line x1="180" y1="130" x2="180" y2="170" stroke="#334155" stroke-width="4" />
                        <line x1="180" y1="150" x2="140" y2="150" stroke="#334155" stroke-width="2" />
                        <line x1="180" y1="140" x2="200" y2="110" stroke="#334155" stroke-width="2" />
                        <line x1="200" y1="110" x2="200" y2="90" stroke="#334155" stroke-width="2" />
                        <line x1="180" y1="160" x2="200" y2="190" stroke="#334155" stroke-width="2" />
                        <polygon points="200,190 190,185 195,180" fill="#334155" />
                        <line x1="200" y1="190" x2="200" y2="230" stroke="#334155" stroke-width="2" />
                        <!-- GND -->
                        <line x1="180" y1="230" x2="220" y2="230" stroke="#334155" stroke-width="2" />
                        <line x1="185" y1="235" x2="215" y2="235" stroke="#334155" stroke-width="2" />
                        <line x1="192" y1="240" x2="208" y2="240" stroke="#334155" stroke-width="2" />
                        <!-- Labels -->
                        <text x="125" y="145" font-size="10" font-weight="bold" fill="#2563eb">B</text>
                        <text x="205" y="105" font-size="10" font-weight="bold" fill="#2563eb">C</text>
                        <text x="205" y="205" font-size="10" font-weight="bold" fill="#2563eb">E</text>
                        <!-- RB -->
                        <rect x="80" y="140" width="40" height="20" fill="white" stroke="#334155" stroke-width="2" />
                        <text x="85" y="135" font-size="10" fill="#64748b">RB</text>
                        <line x1="80" y1="150" x2="40" y2="150" stroke="#334155" stroke-width="2" />
                        <text x="10" y="155" font-size="12" font-weight="bold" fill="#2563eb">Vin</text>
                    </svg>
                </div>
                <div class="slider-group">
                    <div class="slider-label">
                        <span>Vstupn√≠ napƒõt√≠ (Vin)</span>
                        <span class="slider-value" id="vinValue">0.0 V</span>
                    </div>
                    <input type="range" id="vinSlider" min="0" max="12" step="0.1" value="0">
                </div>
                <div class="status-badge status-off" id="statusBadge">Hrazen√≠ (Vypnuto)</div>
            </div>

            <!-- Right: Parameters + Chart -->
            <div class="card" style="display:flex;flex-direction:column">
                <h2><span class="icon">üî¢</span> Technick√© parametry</h2>
                <div class="values-grid">
                    <div class="val-card blue">
                        <div class="label">Proud b√°z√≠ (IB)</div>
                        <div class="value" id="ibValue">0.00 <small>mA</small></div>
                        <div class="formula">IB = (Vin - 0.7) / RB</div>
                    </div>
                    <div class="val-card blue">
                        <div class="label">Proud IC</div>
                        <div class="value" id="icValue">0.0 <small>mA</small></div>
                        <div class="formula">IC = IB √ó hFE</div>
                        <div style="font-size:0.6rem;color:var(--slate-500);font-weight:700;text-transform:uppercase;margin-top:2px"
                            id="icMax">Max: 120.0 mA</div>
                    </div>
                    <div class="val-card">
                        <div class="label">Napƒõt√≠ VCE</div>
                        <div class="value" id="vceValue" style="color:var(--slate-700)">12.00 <small>V</small></div>
                    </div>
                    <div class="val-card">
                        <div class="label">Nap√°jec√≠ VCC</div>
                        <div class="value" id="vccValue" style="color:var(--slate-700)">12.0 <small>V</small></div>
                    </div>
                    <div class="val-card span-2">
                        <div class="label">Zes√≠len√≠ (hFE)</div>
                        <div class="value" id="hfeValue" style="color:var(--slate-700)">100</div>
                    </div>
                </div>
                <div class="chart-box">
                    <div class="chart-title">Z√°vislost VCE na RL (kliknut√≠m zmƒõn√≠te RL)</div>
                    <canvas id="vceChart" width="400" height="180"></canvas>
                    <div class="chart-labels">
                        <span>10 Œ©</span>
                        <span>Odpor z√°tƒõ≈æe (RL)</span>
                        <span>1000 Œ©</span>
                    </div>
                    <div class="chart-info">
                        <strong>Vliv RL:</strong> Odpor z√°tƒõ≈æe urƒçuje maxim√°ln√≠ mo≈æn√Ω proud kolektoru
                        <code>IC,max = VCC / RL</code>. ƒå√≠m je <strong>RL vy≈°≈°√≠</strong>, t√≠m men≈°√≠ proud staƒç√≠ k tomu,
                        aby se tranzistor plnƒõ sepnul.
                    </div>
                </div>
                <div class="config-group">
                    <h3>Konfigurace komponent</h3>
                    <div class="config-row">
                        <div>
                            <label>Odpor RB (b√°ze)</label><br>
                            <span class="hint">Omezuje proud IB</span>
                        </div>
                        <div style="display:flex;align-items:center">
                            <input type="number" id="rbInput" value="1000">
                            <span class="unit">Œ©</span>
                        </div>
                    </div>
                    <div class="config-row">
                        <label>Napƒõt√≠ VCC (zdroj)</label>
                        <div style="display:flex;align-items:center">
                            <input type="number" id="vccInput" value="12">
                            <span class="unit">V</span>
                        </div>
                    </div>
                    <div class="config-row">
                        <label>Odpor RL (z√°tƒõ≈æ)</label>
                        <div style="display:flex;align-items:center">
                            <input type="number" id="rlInput" value="100">
                            <span class="unit">Œ©</span>
                        </div>
                    </div>
                    <div class="config-row">
                        <label>Beta zes√≠len√≠ (hFE)</label>
                        <div style="display:flex;align-items:center">
                            <input type="number" id="hfeInput" value="100">
                        </div>
                    </div>
                    <p class="note">* Zmƒõna RL ovliv≈àuje maxim√°ln√≠ proud kolektoru a t√≠m i bod, kdy tranzistor p≈ôech√°z√≠
                        do saturace (VCE ‚âà 0.2V).</p>
                </div>
            </div>
        </div>

        <!-- Info panel -->
        <div class="grid-info">
            <div class="card">
                <h2><span class="icon">‚ÑπÔ∏è</span> Metodika pro v√Ωuku</h2>
                <p style="font-size:0.85rem;color:var(--slate-600);line-height:1.7">
                    C√≠lem sp√≠nac√≠ho re≈æimu je, aby na tranzistoru byl v sepnut√©m stavu co nejmen≈°√≠ √∫bytek napƒõt√≠.
                    T√≠m se minimalizuje ztr√°tov√Ω v√Ωkon <strong>P = UCE √ó IC</strong> a tranzistor se neh≈ôeje.
                </p>
                <div class="method-grid">
                    <div class="method-box blue">
                        <h4>‚û°Ô∏è Uzav≈ôen√≠</h4>
                        <p>Vin &lt; 0.7V. Tranzistor nevede. Z√°tƒõ≈æ je bez proudu.</p>
                    </div>
                    <div class="method-box green">
                        <h4>‚û°Ô∏è Saturace</h4>
                        <p>B√°ze je "p≈ôeplnƒõna" proudem. Tranzistor je plnƒõ vodiv√Ω.</p>
                    </div>
                </div>
            </div>
            <div class="safety-card">
                <h2
                    style="font-size:0.95rem;font-weight:800;text-transform:uppercase;letter-spacing:0.02em;display:flex;align-items:center;gap:8px">
                    ‚ö†Ô∏è Bezpeƒçnost
                </h2>
                <ul>
                    <li><span class="bullet">‚Ä¢</span><span><strong>≈Ω√°dn√° b√°ze "na p≈ô√≠mo":</strong> V≈ædy pou≈æijte b√°zov√Ω
                            odpor RB k omezen√≠ proudu.</span></li>
                    <li><span class="bullet">‚Ä¢</span><span><strong>Teplo v line√°rn√≠ oblasti:</strong> Pokud tranzistor
                            nen√≠ v saturaci, hroz√≠ tepeln√Ω pr≈Øraz.</span></li>
                    <li><span class="bullet">‚Ä¢</span><span><strong>Indukƒçn√≠ ≈°piƒçky:</strong> P≈ôi sp√≠n√°n√≠ c√≠vek je nutn√°
                            dioda antiparalelnƒõ k z√°tƒõ≈æi.</span></li>
                </ul>
            </div>
        </div>

        <!-- Quiz -->
        <div class="card" id="quizCard">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px">
                <h2 style="margin-bottom:0"><span class="icon">‚ùì</span> Test znalost√≠</h2>
                <span class="quiz-counter" id="quizCounter"></span>
            </div>
            <div id="quizContent">
                <div class="quiz-center">
                    <div class="quiz-icon">‚ùì</div>
                    <h3>Jste p≈ôipraveni na test?</h3>
                    <p>Provƒõ≈ôte sv√© znalosti o tranzistoru v re≈æimu sp√≠naƒçe. Test obsahuje 5 n√°hodnƒõ vybran√Ωch ot√°zek z
                        celkov√©ho fondu 20 ot√°zek.</p>
                    <button class="btn-primary" onclick="startQuiz()">Spustit test</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== Quiz Questions =====
        const QUIZ_QUESTIONS = [
            { question: "Kdy je tranzistor v re≈æimu 'Hrazen√≠' (vypnuto)?", options: ["Kdy≈æ je Vin vƒõt≈°√≠ ne≈æ 0.7V", "Kdy≈æ je Vin men≈°√≠ ne≈æ 0.7V", "Kdy≈æ je proud kolektoru maxim√°ln√≠", "Kdy≈æ je odpor RL nulov√Ω"], correct: 1, explanation: "Tranzistor NPN zaƒç√≠n√° v√©st a≈æ po p≈ôekon√°n√≠ napƒõt√≠ PN p≈ôechodu b√°ze-emitor, co≈æ je typicky 0.7V." },
            { question: "Jak√Ω je hlavn√≠ √∫ƒçel odporu RB?", options: ["Zvy≈°uje napƒõt√≠ VCC", "Omezuje proud kolektoru IC", "Omezuje proud b√°z√≠ IB a chr√°n√≠ tranzistor", "Slou≈æ√≠ jako z√°tƒõ≈æ obvodu"], correct: 2, explanation: "Bez odporu RB by do b√°ze tekl nekontrolovan√Ω proud, kter√Ω by mohl tranzistor zniƒçit." },
            { question: "Co se stane s napƒõt√≠m VCE, kdy≈æ se tranzistor dostane do saturace?", options: ["Vzroste na hodnotu VCC", "Klesne k minim√°ln√≠ hodnotƒõ (cca 0.2V)", "Z≈Østane p≈ôesnƒõ na 0.7V", "Bude se rovnat napƒõt√≠ Vin"], correct: 1, explanation: "V saturaci je tranzistor plnƒõ sepnut a chov√° se t√©mƒõ≈ô jako ide√°ln√≠ vodiƒç s minim√°ln√≠m √∫bytkem napƒõt√≠." },
            { question: "Jak ovlivn√≠ zv√Ω≈°en√≠ odporu z√°tƒõ≈æe RL bod saturace?", options: ["Tranzistor saturuje d≈ô√≠ve (p≈ôi men≈°√≠m proudu b√°ze)", "Tranzistor saturuje pozdƒõji (vy≈æaduje vƒõt≈°√≠ Vin)", "Zv√Ω≈°en√≠ RL nem√° na saturaci ≈æ√°dn√Ω vliv", "Tranzistor se v saturaci v√≠ce zah≈ô√≠v√°"], correct: 0, explanation: "Vy≈°≈°√≠ RL omezuje maxim√°ln√≠ IC. Men≈°√≠ IC znamen√°, ≈æe k dosa≈æen√≠ saturace staƒç√≠ men≈°√≠ proud b√°ze." },
            { question: "Proƒç je nebezpeƒçn√© provozovat tranzistor jako sp√≠naƒç v line√°rn√≠ oblasti?", options: ["Proto≈æe tranzistor v≈Øbec nevede proud", "Proto≈æe je napƒõt√≠ VCE p≈ô√≠li≈° n√≠zk√©", "Proto≈æe vznik√° velk√Ω ztr√°tov√Ω v√Ωkon (teplo) na tranzistoru", "Proto≈æe se t√≠m po≈°kozuje z√°tƒõ≈æ RL"], correct: 2, explanation: "V line√°rn√≠ oblasti je na tranzistoru souƒçasnƒõ napƒõt√≠ i proud, co≈æ vytv√°≈ô√≠ teplo (P = UCE * IC)." },
            { question: "Jak√Ω je vztah mezi proudy tranzistoru?", options: ["IE = IC + IB", "IC = IE + IB", "IB = IC + IE", "IE = IC * IB"], correct: 0, explanation: "Proud emitoru je souƒçtem proudu kolektoru a proudu b√°ze (podle 1. Kirchhoffova z√°kona)." },
            { question: "Co oznaƒçuje zkratka hFE (nebo beta)?", options: ["Vstupn√≠ odpor tranzistoru", "Stejnosmƒõrn√Ω proudov√Ω zesilovac√≠ ƒçinitel", "Maxim√°ln√≠ napƒõt√≠ kolektoru", "Rychlost sp√≠n√°n√≠ tranzistoru"], correct: 1, explanation: "hFE ud√°v√°, kolikr√°t je proud kolektoru vƒõt≈°√≠ ne≈æ proud b√°ze v line√°rn√≠ oblasti." },
            { question: "Proƒç se pou≈æ√≠v√° dioda antiparalelnƒõ k indukƒçn√≠ z√°tƒõ≈æi?", options: ["Aby se zv√Ω≈°il proud z√°tƒõ≈æ√≠", "Aby se tranzistor rychleji sepnul", "K ochranƒõ tranzistoru p≈ôed napƒõ≈•ov√Ωmi ≈°piƒçkami p≈ôi vypnut√≠", "K omezen√≠ proudu b√°ze"], correct: 2, explanation: "P≈ôi vypnut√≠ indukƒçn√≠ z√°tƒõ≈æe vznik√° vysok√© indukovan√© napƒõt√≠ opaƒçn√© polarity, kter√© by mohlo prorazit tranzistor." },
            { question: "V jak√©m stavu se tranzistor chov√° jako rozpojen√Ω sp√≠naƒç?", options: ["V saturaci", "V line√°rn√≠ oblasti", "V re≈æimu hrazen√≠ (cut-off)", "P≈ôi Vin = 5V"], correct: 2, explanation: "V re≈æimu hrazen√≠ neteƒçe b√°z√≠ ≈æ√°dn√Ω proud, tranzistor je nevodiv√Ω." },
            { question: "Jak√° je typick√° hodnota napƒõt√≠ VBE v saturaci u k≈ôem√≠kov√©ho tranzistoru?", options: ["0.2 V", "0.7 a≈æ 0.9 V", "12 V", "0 V"], correct: 1, explanation: "Napƒõt√≠ mezi b√°z√≠ a emitorem je v sepnut√©m stavu d√°no √∫bytkem na PN p≈ôechodu, cca 0.7V." },
            { question: "Co se stane, pokud budeme tranzistor v saturaci budit je≈°tƒõ vƒõt≈°√≠m proudem IB?", options: ["Proud IC se v√Ωraznƒõ zv√Ω≈°√≠", "Napƒõt√≠ VCE klesne na nulu", "Proud IC se ji≈æ t√©mƒõ≈ô nezmƒõn√≠ (z≈Østane na maximu)", "Tranzistor se okam≈æitƒõ vypne"], correct: 2, explanation: "V saturaci je IC limitov√°n odporem z√°tƒõ≈æe a napƒõt√≠m VCC. Dal≈°√≠ zvy≈°ov√°n√≠ IB u≈æ IC nezv√Ω≈°√≠." },
            { question: "Jak√° je hlavn√≠ v√Ωhoda tranzistoru oproti mechanick√©mu sp√≠naƒçi?", options: ["Vƒõt≈°√≠ rozmƒõry", "Vysok√° rychlost sp√≠n√°n√≠ a absence pohybliv√Ωch ƒç√°st√≠", "Nulov√Ω √∫bytek napƒõt√≠ v sepnut√©m stavu", "Jednodu≈°≈°√≠ zapojen√≠ bez odpor≈Ø"], correct: 1, explanation: "Tranzistory mohou sp√≠nat milionykr√°t za sekundu a neopot≈ôebov√°vaj√≠ se mechanicky." },
            { question: "Co znamen√° oznaƒçen√≠ NPN?", options: ["Napƒõt√≠-Proud-Napƒõt√≠", "Struktura polovodiƒç≈Ø: Negativn√≠-Pozitivn√≠-Negativn√≠", "N√°zev v√Ωrobce tranzistoru", "N√≠zk√Ω-Pr≈Ømƒõrn√Ω-N√≠zk√Ω zisk"], correct: 1, explanation: "Oznaƒçuje vrstvy polovodiƒçe typu N (kolektor), P (b√°ze) a N (emitor)." },
            { question: "Kter√Ω v√Ωvod tranzistoru je u NPN p≈ôipojen na GND?", options: ["B√°ze", "Kolektor", "Emitor", "≈Ω√°dn√Ω"], correct: 2, explanation: "V z√°kladn√≠m zapojen√≠ NPN sp√≠naƒçe je emitor p≈ôipojen p≈ô√≠mo na z√°porn√Ω p√≥l (GND)." },
            { question: "Jak√Ω je ztr√°tov√Ω v√Ωkon na tranzistoru v ide√°ln√≠m stavu saturace?", options: ["Maxim√°ln√≠ mo≈æn√Ω", "Velmi mal√Ω (d√≠ky n√≠zk√©mu VCE)", "Nulov√Ω", "Stejn√Ω jako na z√°tƒõ≈æi"], correct: 1, explanation: "Proto≈æe P = U * I a napƒõt√≠ VCE je v saturaci velmi mal√© (cca 0.2V), je i ztr√°tov√Ω v√Ωkon n√≠zk√Ω." },
            { question: "Co se stane s proudem IC, pokud se p≈ôeru≈°√≠ p≈ô√≠vod do b√°ze?", options: ["IC se zv√Ω≈°√≠ na maximum", "IC klesne na nulu (tranzistor zav≈ôe)", "IC z≈Østane stejn√Ω", "Tranzistor se zniƒç√≠"], correct: 1, explanation: "Bez proudu b√°ze tranzistor nevede, tedy IC zanikne." },
            { question: "Jak ovliv≈àuje teplota proudov√Ω zisk hFE?", options: ["Zisk se s teplotou nemƒõn√≠", "Zisk se s rostouc√≠ teplotou obvykle zvy≈°uje", "Zisk s teplotou kles√° k nule", "Teplota ovliv≈àuje pouze napƒõt√≠ VCC"], correct: 1, explanation: "U vƒõt≈°iny bipol√°rn√≠ch tranzistor≈Ø proudov√Ω zisk s teplotou m√≠rnƒõ roste." },
            { question: "K ƒçemu slou≈æ√≠ chladiƒç u v√Ωkonov√Ωch tranzistor≈Ø?", options: ["Ke zv√Ω≈°en√≠ napƒõt√≠ Vin", "K odvodu tepla vznikaj√≠c√≠ho ztr√°tov√Ωm v√Ωkonem", "Ke sn√≠≈æen√≠ odporu RL", "K dekoraci obvodu"], correct: 1, explanation: "P≈ôi sp√≠n√°n√≠ velk√Ωch proud≈Ø vznik√° teplo, kter√© je nutn√© odv√©st." },
            { question: "Jak√Ω je rozd√≠l mezi BJT a MOSFETem z hlediska ≈ô√≠zen√≠?", options: ["≈Ω√°dn√Ω, oba se ≈ô√≠d√≠ proudem", "BJT se ≈ô√≠d√≠ proudem, MOSFET napƒõt√≠m", "BJT se ≈ô√≠d√≠ napƒõt√≠m, MOSFET proudem", "Oba se ≈ô√≠d√≠ pouze mechanicky"], correct: 1, explanation: "U BJT ≈ô√≠d√≠me proud kolektoru proudem b√°ze, u MOSFETu napƒõt√≠m na hradle." },
            { question: "Co se stane, pokud je odpor RB p≈ô√≠li≈° velk√Ω?", options: ["Tranzistor se zniƒç√≠ velk√Ωm proudem", "Tranzistor se nemus√≠ plnƒõ otev≈ô√≠t (nedos√°hne saturace)", "Zv√Ω≈°√≠ se napƒõt√≠ VCC", "Z√°tƒõ≈æ RL sho≈ô√≠"], correct: 1, explanation: "Velk√Ω RB omez√≠ proud b√°ze natolik, ≈æe tranzistor z≈Østane v line√°rn√≠ oblasti." }
        ];

        // ===== State =====
        let vin = 0, vcc = 12, rBase = 1000, rLoad = 100, hfe = 100;
        let quizActive = [], quizIdx = 0, quizScore = 0, quizFeedback = false, quizSelected = null, quizDone = false;

        // ===== DOM Elements =====
        const $ = id => document.getElementById(id);

        // ===== Simulation =====
        function update() {
            const iBase = Math.max(0, (vin - 0.7) / rBase);
            const icIdeal = iBase * hfe;
            const icMax = vcc / rLoad;
            const icActual = Math.min(icIdeal, icMax);
            const vCe = vin <= 0.7 ? vcc : Math.max(0.2, vcc - (icActual * rLoad));

            // Update display
            $('vinValue').textContent = vin.toFixed(1) + ' V';
            $('ibValue').innerHTML = (iBase * 1000).toFixed(2) + ' <small>mA</small>';
            $('icValue').innerHTML = (icActual * 1000).toFixed(1) + ' <small>mA</small>';
            $('icMax').textContent = 'Max: ' + (icMax * 1000).toFixed(1) + ' mA';
            $('vceValue').innerHTML = vCe.toFixed(2) + ' <small>V</small>';
            $('vccValue').innerHTML = vcc.toFixed(1) + ' <small>V</small>';
            $('hfeValue').textContent = hfe;
            $('vccLabel').textContent = 'VCC (+' + vcc + 'V)';
            $('rlLabel').textContent = 'RL (' + rLoad + 'Œ©)';

            // Status
            const badge = $('statusBadge');
            let ledOp = 0;
            if (vin <= 0.7) {
                badge.textContent = 'Hrazen√≠ (Vypnuto)';
                badge.className = 'status-badge status-off';
                $('rlRect').setAttribute('fill', '#cbd5e1');
            } else if (icIdeal >= icMax) {
                badge.textContent = 'Saturace (Plnƒõ sepnuto)';
                badge.className = 'status-badge status-saturated';
                ledOp = 1;
                $('rlRect').setAttribute('fill', '#fbbf24');
            } else {
                badge.textContent = 'Line√°rn√≠ oblast (Zesilov√°n√≠)';
                badge.className = 'status-badge status-linear';
                ledOp = icActual / icMax;
                $('rlRect').setAttribute('fill', '#cbd5e1');
            }
            $('ledGlow').style.opacity = ledOp * 0.5;

            drawChart(vCe);
        }

        // ===== Chart =====
        function drawChart(currentVCE) {
            const canvas = $('vceChart');
            const ctx = canvas.getContext('2d');
            const W = canvas.width, H = canvas.height;
            ctx.clearRect(0, 0, W, H);

            // Grid
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 1;
            for (let y = 0; y <= 12; y += 2) {
                const py = H - (y / 12) * H;
                ctx.beginPath();
                ctx.setLineDash([3, 3]);
                ctx.moveTo(0, py); ctx.lineTo(W, py);
                ctx.stroke();
            }
            ctx.setLineDash([]);

            // Y-axis labels
            ctx.fillStyle = '#94a3b8';
            ctx.font = '10px monospace';
            ctx.textAlign = 'right';
            for (let y = 0; y <= 12; y += 4) {
                ctx.fillText(y + 'V', 28, H - (y / 12) * H + 4);
            }

            // Curve
            const iBase = Math.max(0, (vin - 0.7) / rBase);
            const icIdeal = iBase * hfe;
            ctx.beginPath();
            ctx.strokeStyle = '#2563eb';
            ctx.lineWidth = 2;
            for (let rl = 10; rl <= 1000; rl += 5) {
                const icMax = vcc / rl;
                const icActual = Math.min(icIdeal, icMax);
                const vceVal = vin <= 0.7 ? vcc : Math.max(0.2, vcc - (icActual * rl));
                const x = ((rl - 10) / 990) * (W - 36) + 36;
                const y = H - (vceVal / 12) * H;
                if (rl === 10) ctx.moveTo(x, y); else ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Current RL marker
            const rlX = ((rLoad - 10) / 990) * (W - 36) + 36;
            const vceY = H - (currentVCE / 12) * H;

            // Reference lines
            ctx.strokeStyle = '#ef4444';
            ctx.lineWidth = 1;
            ctx.setLineDash([3, 3]);
            ctx.beginPath(); ctx.moveTo(rlX, 0); ctx.lineTo(rlX, H); ctx.stroke();
            ctx.beginPath(); ctx.moveTo(0, vceY); ctx.lineTo(W, vceY); ctx.stroke();
            ctx.setLineDash([]);

            // Labels
            ctx.fillStyle = '#ef4444';
            ctx.font = 'bold 10px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('RL=' + rLoad + 'Œ©', rlX, 12);
            ctx.textAlign = 'right';
            ctx.fillText('VCE=' + currentVCE.toFixed(2) + 'V', W - 4, vceY - 6);

            // Dot
            ctx.beginPath();
            ctx.arc(rlX, vceY, 4, 0, Math.PI * 2);
            ctx.fillStyle = '#ef4444';
            ctx.fill();
        }

        // Chart click -> change RL
        $('vceChart').addEventListener('click', function (e) {
            const rect = this.getBoundingClientRect();
            const x = (e.clientX - rect.left) / rect.width;
            const rl = Math.round(10 + x * 990);
            rLoad = Math.max(10, Math.min(1000, rl));
            $('rlInput').value = rLoad;
            update();
        });

        // ===== Input Bindings =====
        $('vinSlider').addEventListener('input', e => { vin = parseFloat(e.target.value); update(); });
        $('rbInput').addEventListener('input', e => { rBase = Math.max(1, Number(e.target.value)); update(); });
        $('vccInput').addEventListener('input', e => { vcc = Math.max(0.1, Number(e.target.value)); update(); });
        $('rlInput').addEventListener('input', e => { rLoad = Math.max(1, Number(e.target.value)); update(); });
        $('hfeInput').addEventListener('input', e => { hfe = Math.max(1, Number(e.target.value)); update(); });

        // ===== Quiz =====
        function startQuiz() {
            const shuffled = [...QUIZ_QUESTIONS].sort(() => 0.5 - Math.random());
            quizActive = shuffled.slice(0, 5);
            quizIdx = 0; quizScore = 0; quizFeedback = false; quizSelected = null; quizDone = false;
            renderQuiz();
        }

        function renderQuiz() {
            const content = $('quizContent');
            const counter = $('quizCounter');

            if (!quizActive.length) {
                counter.textContent = '';
                content.innerHTML = `
          <div class="quiz-center">
            <div class="quiz-icon">‚ùì</div>
            <h3>Jste p≈ôipraveni na test?</h3>
            <p>Provƒõ≈ôte sv√© znalosti o tranzistoru v re≈æimu sp√≠naƒçe. Test obsahuje 5 n√°hodnƒõ vybran√Ωch ot√°zek z celkov√©ho fondu 20 ot√°zek.</p>
            <button class="btn-primary" onclick="startQuiz()">Spustit test</button>
          </div>`;
                return;
            }

            if (quizDone) {
                counter.textContent = '';
                const msg = quizScore === quizActive.length
                    ? "Gratulujeme! Jste expertem na tranzistorov√© sp√≠naƒçe."
                    : quizScore >= 3
                        ? "Dobr√° pr√°ce! M√°te solidn√≠ z√°klady, ale nƒõkter√© detaily by st√°lo za to zopakovat."
                        : "Zkuste si simulaci je≈°tƒõ jednou proj√≠t a sledovat, jak se mƒõn√≠ parametry p≈ôi saturaci.";
                content.innerHTML = `
          <div class="quiz-center">
            <div class="quiz-icon" style="background:#f0fdf4">‚úÖ</div>
            <h3>Test dokonƒçen!</h3>
            <p style="margin-bottom:0">Va≈°e sk√≥re je:</p>
            <div class="quiz-score">${quizScore} / ${quizActive.length}</div>
            <p style="font-style:italic">${msg}</p>
            <button class="btn-secondary" onclick="resetQuiz()">üîÑ Zkusit znovu</button>
          </div>`;
                return;
            }

            const q = quizActive[quizIdx];
            counter.textContent = `Ot√°zka ${quizIdx + 1} z ${quizActive.length}`;

            let optionsHtml = q.options.map((opt, i) => {
                let cls = 'quiz-option';
                if (quizFeedback) {
                    if (i === q.correct) cls += ' correct';
                    else if (i === quizSelected) cls += ' wrong';
                    else cls += ' faded';
                }
                return `<button class="${cls}" ${quizFeedback ? 'disabled' : ''} onclick="handleAnswer(${i})">${opt}${quizFeedback && i === q.correct ? ' ‚úÖ' : ''}</button>`;
            }).join('');

            let feedbackHtml = '';
            if (quizFeedback) {
                const btnText = quizIdx === quizActive.length - 1 ? 'Dokonƒçit test' : 'Dal≈°√≠ ot√°zka ‚û°Ô∏è';
                feedbackHtml = `
          <div class="quiz-explanation">
            <div class="label">Vysvƒõtlen√≠</div>
            <p>${q.explanation}</p>
            <button class="btn-primary" style="width:100%;margin-top:12px" onclick="nextQuestion()">${btnText}</button>
          </div>`;
            }

            content.innerHTML = `
        <div class="quiz-question">${q.question}</div>
        ${optionsHtml}
        ${feedbackHtml}`;
        }

        function handleAnswer(idx) {
            if (quizFeedback) return;
            quizSelected = idx;
            quizFeedback = true;
            if (idx === quizActive[quizIdx].correct) quizScore++;
            renderQuiz();
        }

        function nextQuestion() {
            if (quizIdx < quizActive.length - 1) {
                quizIdx++;
                quizFeedback = false;
                quizSelected = null;
                renderQuiz();
            } else {
                quizDone = true;
                renderQuiz();
            }
        }

        function resetQuiz() {
            quizActive = [];
            quizIdx = 0; quizScore = 0; quizFeedback = false; quizSelected = null; quizDone = false;
            renderQuiz();
        }

        // Init
        update();
    </script>
</body>

</html>